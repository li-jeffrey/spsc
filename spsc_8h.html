<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SPSC: lib/spsc.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SPSC
   </div>
   <div id="projectbrief">A shared memory single-producer single-consumer (SPSC) queue</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('spsc_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">spsc.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for spsc.h:</div>
<div class="dyncontent">
<div class="center"><img src="spsc_8h__incl.png" border="0" usemap="#alib_2spsc_8h" alt=""/></div>
<map name="alib_2spsc_8h" id="alib_2spsc_8h">
<area shape="rect" title=" " alt="" coords="41,5,119,32"/>
<area shape="rect" title=" " alt="" coords="5,80,69,107"/>
<area shape="rect" title=" " alt="" coords="94,80,154,107"/>
</map>
</div>
</div>
<p><a href="spsc_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspsc__ring__data.html">spsc_ring_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspsc__ring.html">spsc_ring</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0f29499856aaa8b72a901040fb10f80a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spsc_8h.html#a0f29499856aaa8b72a901040fb10f80a">MSG_SIZE_T</a>&#160;&#160;&#160;uint32_t</td></tr>
<tr class="separator:a0f29499856aaa8b72a901040fb10f80a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a064cc7153fdb5596b2079d865dd9e055"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spsc_8h.html#a064cc7153fdb5596b2079d865dd9e055">READ_MODE</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a064cc7153fdb5596b2079d865dd9e055"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2fe33f497c74e0b5a72f36f121b2ef0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spsc_8h.html#aa2fe33f497c74e0b5a72f36f121b2ef0">WRITE_MODE</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:aa2fe33f497c74e0b5a72f36f121b2ef0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a61a416bab269af4d034b8c0daffaee10"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spsc_8h.html#a61a416bab269af4d034b8c0daffaee10">spsc_create_sub</a> (<a class="el" href="structspsc__ring.html">spsc_ring</a> *ring, const char *pathname, const size_t size)</td></tr>
<tr class="separator:a61a416bab269af4d034b8c0daffaee10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d96ca321b1eba0d5520ab4970be1fa6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spsc_8h.html#a7d96ca321b1eba0d5520ab4970be1fa6">spsc_create_pub</a> (<a class="el" href="structspsc__ring.html">spsc_ring</a> *ring, const char *pathname, const size_t size)</td></tr>
<tr class="separator:a7d96ca321b1eba0d5520ab4970be1fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbb07dafa028ddb5dc7660d6675196b8"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spsc_8h.html#adbb07dafa028ddb5dc7660d6675196b8">spsc_read</a> (<a class="el" href="structspsc__ring.html">spsc_ring</a> *ring, void *dest, const size_t n)</td></tr>
<tr class="separator:adbb07dafa028ddb5dc7660d6675196b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73a4a50c12c2ca89c600c4352ed1176b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="spsc_8h.html#a0f29499856aaa8b72a901040fb10f80a">MSG_SIZE_T</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spsc_8h.html#a73a4a50c12c2ca89c600c4352ed1176b">spsc_write</a> (<a class="el" href="structspsc__ring.html">spsc_ring</a> *ring, const void *src, const <a class="el" href="spsc_8h.html#a0f29499856aaa8b72a901040fb10f80a">MSG_SIZE_T</a> n)</td></tr>
<tr class="separator:a73a4a50c12c2ca89c600c4352ed1176b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10ac70f206f583cbea76623df4160706"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spsc_8h.html#a10ac70f206f583cbea76623df4160706">spsc_size</a> (const <a class="el" href="structspsc__ring.html">spsc_ring</a> *ring)</td></tr>
<tr class="separator:a10ac70f206f583cbea76623df4160706"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d521f916f29b7d16faa46f6aaf4206"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spsc_8h.html#ad1d521f916f29b7d16faa46f6aaf4206">spsc_capacity</a> (const <a class="el" href="structspsc__ring.html">spsc_ring</a> *ring)</td></tr>
<tr class="separator:ad1d521f916f29b7d16faa46f6aaf4206"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a269daeb8ee2e5aa57d19794183f35c93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spsc_8h.html#a269daeb8ee2e5aa57d19794183f35c93">spsc_destroy</a> (<a class="el" href="structspsc__ring.html">spsc_ring</a> *ring)</td></tr>
<tr class="separator:a269daeb8ee2e5aa57d19794183f35c93"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a0f29499856aaa8b72a901040fb10f80a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f29499856aaa8b72a901040fb10f80a">&#9670;&nbsp;</a></span>MSG_SIZE_T</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_SIZE_T&#160;&#160;&#160;uint32_t</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a064cc7153fdb5596b2079d865dd9e055"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a064cc7153fdb5596b2079d865dd9e055">&#9670;&nbsp;</a></span>READ_MODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READ_MODE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa2fe33f497c74e0b5a72f36f121b2ef0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2fe33f497c74e0b5a72f36f121b2ef0">&#9670;&nbsp;</a></span>WRITE_MODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WRITE_MODE&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad1d521f916f29b7d16faa46f6aaf4206"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1d521f916f29b7d16faa46f6aaf4206">&#9670;&nbsp;</a></span>spsc_capacity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t spsc_capacity </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structspsc__ring.html">spsc_ring</a> *&#160;</td>
          <td class="paramname"><em>ring</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the maximum size of the ring. </p><dl class="section return"><dt>Returns</dt><dd>the maximum size of the ring. </dd></dl>

</div>
</div>
<a id="a7d96ca321b1eba0d5520ab4970be1fa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d96ca321b1eba0d5520ab4970be1fa6">&#9670;&nbsp;</a></span>spsc_create_pub()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spsc_create_pub </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structspsc__ring.html">spsc_ring</a> *&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pathname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a publisher for a shared memory spsc ring located at the specified path. A new file is created if it doesn't exist. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring</td><td>pointer to a <a class="el" href="structspsc__ring.html">spsc_ring</a> structure </td></tr>
    <tr><td class="paramname">pathname</td><td>path to the shared memory file </td></tr>
    <tr><td class="paramname">size</td><td>max size of the ring in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful, otherwise an error code is returned. </dd></dl>

</div>
</div>
<a id="a61a416bab269af4d034b8c0daffaee10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61a416bab269af4d034b8c0daffaee10">&#9670;&nbsp;</a></span>spsc_create_sub()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int spsc_create_sub </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structspsc__ring.html">spsc_ring</a> *&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pathname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a subscriber for a shared memory spsc ring located at the specified path. A new file is created if it doesn't exist. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring</td><td>pointer to a <a class="el" href="structspsc__ring.html">spsc_ring</a> structure </td></tr>
    <tr><td class="paramname">pathname</td><td>path to the shared memory file </td></tr>
    <tr><td class="paramname">size</td><td>max size of the ring in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful, otherwise an error code is returned. </dd></dl>

</div>
</div>
<a id="a269daeb8ee2e5aa57d19794183f35c93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a269daeb8ee2e5aa57d19794183f35c93">&#9670;&nbsp;</a></span>spsc_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spsc_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structspsc__ring.html">spsc_ring</a> *&#160;</td>
          <td class="paramname"><em>ring</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destructor for <a class="el" href="structspsc__ring.html">spsc_ring</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring</td><td>pointer to a <a class="el" href="structspsc__ring.html">spsc_ring</a> structure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adbb07dafa028ddb5dc7660d6675196b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbb07dafa028ddb5dc7660d6675196b8">&#9670;&nbsp;</a></span>spsc_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t spsc_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structspsc__ring.html">spsc_ring</a> *&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the next entry from the ring into the specified location. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring</td><td>pointer to a <a class="el" href="structspsc__ring.html">spsc_ring</a> structure </td></tr>
    <tr><td class="paramname">dest</td><td>pointer to a location to copy bytes to </td></tr>
    <tr><td class="paramname">n</td><td>number of bytes to copy, must be less than or equal to the size of dest. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of bytes copied, or 0 if there is nothing left to read. </dd></dl>

</div>
</div>
<a id="a10ac70f206f583cbea76623df4160706"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10ac70f206f583cbea76623df4160706">&#9670;&nbsp;</a></span>spsc_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t spsc_size </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structspsc__ring.html">spsc_ring</a> *&#160;</td>
          <td class="paramname"><em>ring</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets an approximate size of the ring. The returned number depends on whether the publishing thread or subscribing thread called the method. The behvaiour is undefined for any other calling thread. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring</td><td>pointer to a <a class="el" href="structspsc__ring.html">spsc_ring</a> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an approximate size of the ring. </dd></dl>

</div>
</div>
<a id="a73a4a50c12c2ca89c600c4352ed1176b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73a4a50c12c2ca89c600c4352ed1176b">&#9670;&nbsp;</a></span>spsc_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spsc_8h.html#a0f29499856aaa8b72a901040fb10f80a">MSG_SIZE_T</a> spsc_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structspsc__ring.html">spsc_ring</a> *&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="spsc_8h.html#a0f29499856aaa8b72a901040fb10f80a">MSG_SIZE_T</a>&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Writes an entry into the ring, copying from the specified location. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring</td><td>pointer to a <a class="el" href="structspsc__ring.html">spsc_ring</a> structure </td></tr>
    <tr><td class="paramname">src</td><td>pointer to a location to copy bytes from </td></tr>
    <tr><td class="paramname">n</td><td>number of bytes to copy, must be less than or equal to the size of src </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of bytes copied, or 0 if the ring is full. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="spsc_8h.html">spsc.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
